# üí≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏

## üéØ –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π —á–µ—Ä–µ–∑ 4 –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:
- **Coinbase Commerce** ‚Äî –ø—Ä–æ—Å—Ç–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è BTC, ETH, USDT
- **NOWPayments** ‚Äî —à–∏—Ä–æ–∫–∏–π –≤—ã–±–æ—Ä –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç (100+)
- **CoinPayments** ‚Äî –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π altcoins
- **Binance Pay** ‚Äî –±—ã—Å—Ç—Ä—ã–µ –ø–ª–∞—Ç–µ–∂–∏ —á–µ—Ä–µ–∑ Binance

---

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü–∞ `payment_providers`
–•—Ä–∞–Ω–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤:
```sql
- id: —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID
- name: –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- type: —Ç–∏–ø (coinbase_commerce, nowpayments, etc)
- is_active: –≤–∫–ª—é—á–µ–Ω/–≤—ã–∫–ª—é—á–µ–Ω
- supported_currencies: –º–∞—Å—Å–∏–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –≤–∞–ª—é—Ç
- config: JSON —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
```

#### –¢–∞–±–ª–∏—Ü–∞ `payment_provider_transactions`
–û—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –ø–ª–∞—Ç–µ–∂–∏:
```sql
- id: ID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- provider_id: —Å—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- exchange_id: —Å—Å—ã–ª–∫–∞ –Ω–∞ –æ–±–º–µ–Ω
- external_transaction_id: ID –≤ —Å–∏—Å—Ç–µ–º–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- payment_url: —Å—Å—ã–ª–∫–∞ –¥–ª—è –æ–ø–ª–∞—Ç—ã
- amount: —Å—É–º–º–∞ –ø–ª–∞—Ç–µ–∂–∞
- currency: –≤–∞–ª—é—Ç–∞
- status: pending/processing/completed/failed/expired
- confirmations: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–π
- payment_address: –∞–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ API –∫–ª—é—á–µ–π

#### Coinbase Commerce
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://commerce.coinbase.com
2. –°–æ–∑–¥–∞–π—Ç–µ API key –≤ Settings ‚Üí API keys
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `key_`)

#### NOWPayments
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://nowpayments.io
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí API
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ API key

#### CoinPayments
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://www.coinpayments.net
2. –°–æ–∑–¥–∞–π—Ç–µ API credentials –≤ Account ‚Üí API Keys
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ Public Key –∏ Private Key

#### Binance Pay
1. –í–æ–π–¥–∏—Ç–µ –≤ Binance
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Binance Pay ‚Üí Merchant
3. –°–æ–∑–¥–∞–π—Ç–µ API credentials

### 2. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç

–í –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –¥–æ–±–∞–≤—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã:
```
COINBASE_COMMERCE_API_KEY = "–≤–∞—à_–∫–ª—é—á"
NOWPAYMENTS_API_KEY = "–≤–∞—à_–∫–ª—é—á"
COINPAYMENTS_PUBLIC_KEY = "–≤–∞—à_–ø—É–±–ª–∏—á–Ω—ã–π_–∫–ª—é—á"
COINPAYMENTS_PRIVATE_KEY = "–≤–∞—à_–ø—Ä–∏–≤–∞—Ç–Ω—ã–π_–∫–ª—é—á"
BINANCE_PAY_API_KEY = "–≤–∞—à_–∫–ª—é—á"
BINANCE_PAY_SECRET = "–≤–∞—à_—Å–µ–∫—Ä–µ—Ç"
```

### 3. –í–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

–í –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏:
1. –û—Ç–∫—Ä–æ–π—Ç–µ **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí –ü–ª–∞—Ç–µ–∂–∏**
2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ –Ω—É–∂–Ω—ã–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ã –≤ —Å—Ç–∞—Ç—É—Å **–ê–∫—Ç–∏–≤–µ–Ω**
3. –ì–æ—Ç–æ–≤–æ! –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—á–Ω–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö

---

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –°–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞

```javascript
// –ó–∞–ø—Ä–æ—Å
POST /admin-api
Content-Type: application/json

{
  "resource": "payment",
  "exchange_id": 123,
  "provider_id": 1,
  "amount": "0.5",
  "currency": "BTC"
}

// –û—Ç–≤–µ—Ç
{
  "transaction_id": 456,
  "payment_url": "https://commerce.coinbase.com/charges/ABC123",
  "payment_address": "bc1q...",
  "amount": "0.5",
  "currency": "BTC",
  "provider": "Coinbase Commerce"
}
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

```javascript
// –ó–∞–ø—Ä–æ—Å
GET /admin-api?resource=payment_transaction&id=456

// –û—Ç–≤–µ—Ç
{
  "id": 456,
  "external_id": "ABC123",
  "status": "completed",
  "amount": "0.5",
  "currency": "BTC",
  "confirmations": 3,
  "required_confirmations": 3,
  "payment_url": "https://commerce.coinbase.com/charges/ABC123",
  "payment_address": "bc1q...",
  "provider": "Coinbase Commerce"
}
```

### Webhook –æ–±—Ä–∞–±–æ—Ç–∫–∞

–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç webhook —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:

```javascript
// Webhook –æ—Ç –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
POST /admin-api
Content-Type: application/json

{
  "resource": "webhook",
  "provider": "nowpayments",
  "payment_id": "12345",
  "status": "confirmed",
  "confirmations": 15
}
```

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –ù–∞—Ö–æ–¥–∏—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –ø–æ `payment_id`
2. –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å
3. –ü—Ä–∏ `status: confirmed` –∑–∞–≤–µ—Ä—à–∞–µ—Ç –æ–±–º–µ–Ω
4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç email –∫–ª–∏–µ–Ω—Ç—É

---

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –ø–ª–∞—Ç–µ–∂–∞

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ invoice
```
–ö–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–µ—Ç –æ–±–º–µ–Ω
‚Üì
–°–∏—Å—Ç–µ–º–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä
‚Üì
API –∑–∞–ø—Ä–æ—Å –∫ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É (—Å–æ–∑–¥–∞–Ω–∏–µ invoice)
‚Üì
–ü–æ–ª—É—á–µ–Ω–∏–µ payment_url –∏ –∞–¥—Ä–µ—Å–∞
‚Üì
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ payment_provider_transactions
‚Üì
–ü–æ–∫–∞–∑ QR-–∫–æ–¥–∞ –∫–ª–∏–µ–Ω—Ç—É
```

### –®–∞–≥ 2: –û–∂–∏–¥–∞–Ω–∏–µ –æ–ø–ª–∞—Ç—ã
```
–ö–ª–∏–µ–Ω—Ç —Å–∫–∞–Ω–∏—Ä—É–µ—Ç QR –∏–ª–∏ –∫–æ–ø–∏—Ä—É–µ—Ç –∞–¥—Ä–µ—Å
‚Üì
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É
‚Üì
–ü—Ä–æ–≤–∞–π–¥–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –ø–ª–∞—Ç–µ–∂
‚Üì
Webhook: status = "pending"
```

### –®–∞–≥ 3: –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
```
Blockchain confirmations –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è
‚Üì
Webhook: confirmations = 3/3
‚Üì
Webhook: status = "confirmed"
‚Üì
–°–∏—Å—Ç–µ–º–∞ –æ–±–Ω–æ–≤–ª—è–µ—Ç exchanges.status = "completed"
```

### –®–∞–≥ 4: –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ
```
Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∫–ª–∏–µ–Ω—Ç—É
‚Üì
–°—Ä–µ–¥—Å—Ç–≤–∞ –∑–∞—á–∏—Å–ª—è—é—Ç—Å—è –Ω–∞ –∫–æ—à–µ–ª–µ–∫
‚Üì
–û–±–º–µ–Ω –∑–∞–≤–µ—Ä—à–µ–Ω ‚úÖ
```

---

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí –ü–ª–∞—Ç–µ–∂–∏**
2. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å:
   - –ù–∞–∑–≤–∞–Ω–∏–µ –∏ —Ç–∏–ø
   - –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∞–ª—é—Ç—ã
   - –°—Ç–∞—Ç—É—Å (–∞–∫—Ç–∏–≤–µ–Ω/–æ—Ç–∫–ª—é—á–µ–Ω)

### –í–∫–ª—é—á–µ–Ω–∏–µ/–æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ toggle **–ê–∫—Ç–∏–≤–µ–Ω/–û—Ç–∫–ª—é—á–µ–Ω**
2. –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
3. –ï—Å–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω ‚Äî –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –Ω–æ–≤—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
```
Dashboard ‚Üí Payment Transactions

–§–∏–ª—å—Ç—Ä—ã:
- –ü–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä—É
- –ü–æ —Å—Ç–∞—Ç—É—Å—É
- –ü–æ –¥–∞—Ç–µ
- –ü–æ —Å—É–º–º–µ

–≠–∫—Å–ø–æ—Ä—Ç –≤ CSV –¥–ª—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏
```

---

## üìà –ö–æ–º–∏—Å—Å–∏–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∏—Å—Å–∏—è–º–∏ –ø–æ –ø–∞—Ä–∞–º
1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí –ö–æ–º–∏—Å—Å–∏–∏**
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã:
   - –ü—Ä–æ—Ü–µ–Ω—Ç –∫–æ–º–∏—Å—Å–∏–∏
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞
   - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞

### –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∫—É—Ä—Å–æ–≤
1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∫—É—Ä—Å–æ–≤**
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ:
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
   - –ú–Ω–æ–∂–∏—Ç–µ–ª—å –∫—É—Ä—Å–∞ (–Ω–∞—Ü–µ–Ω–∫–∞)
   - –í—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ–∫—Å—Ç—ã –Ω–∞ —Å–∞–π—Ç–µ
1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí –¢–µ–∫—Å—Ç—ã –∏ —Å—Å—ã–ª–∫–∏**
2. –†–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ:
   - –ó–∞–≥–æ–ª–æ–≤–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü
   - –ö–æ–Ω—Ç–∞–∫—Ç—ã
   - –°—Å—ã–ª–∫–∏ –≤ —Ñ—É—Ç–µ—Ä–µ
   - –õ–∏–º–∏—Ç—ã –æ–±–º–µ–Ω–∞

---

## üö® Troubleshooting

### –ü—Ä–æ–≤–∞–π–¥–µ—Ä –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –ø–ª–∞—Ç–µ–∂
**–ü—Ä–∏—á–∏–Ω—ã:**
- API –∫–ª—é—á –Ω–µ–≤–µ—Ä–Ω—ã–π –∏–ª–∏ –∏—Å—Ç–µ–∫
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä –æ—Ç–∫–ª—é—á–µ–Ω –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–∞–ª–∞–Ω—Å–∞ —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä –∞–∫—Ç–∏–≤–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend —Ñ—É–Ω–∫—Ü–∏–∏
4. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä

### Webhook –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç
**–ü—Ä–∏—á–∏–Ω—ã:**
- Webhook URL –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω —É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä —Ç—Ä–µ–±—É–µ—Ç IP whitelist

**–†–µ—à–µ–Ω–∏–µ:**
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook URL –≤ –ø–∞–Ω–µ–ª–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—Ö–æ–¥—è—â–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
3. –î–æ–±–∞–≤—å—Ç–µ IP –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –≤ whitelist

### –ü–ª–∞—Ç–µ–∂ –∑–∞–≤–∏—Å –≤ processing
**–ü—Ä–∏—á–∏–Ω—ã:**
- –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ blockchain confirmations
- –ü—Ä–æ–≤–∞–π–¥–µ—Ä –∑–∞–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—É–º–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ TX hash –≤ blockchain explorer
2. –ü–æ–¥–æ–∂–¥–∏—Ç–µ –±–æ–ª—å—à–µ confirmations
3. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –•—Ä–∞–Ω–µ–Ω–∏–µ API –∫–ª—é—á–µ–π
‚úÖ **–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –•—Ä–∞–Ω–∏—Ç—å –≤ —Å–µ–∫—Ä–µ—Ç–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ Git

‚ùå **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- –•—Ä–∞–Ω–∏—Ç—å –≤ –∫–æ–¥–µ
- –•—Ä–∞–Ω–∏—Ç—å –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ frontend

### –ü—Ä–æ–≤–µ—Ä–∫–∞ webhook
–ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç webhook:
```javascript
// –ü—Ä–∏–º–µ—Ä –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ø–∏—Å–∏ NOWPayments
const crypto = require('crypto');

const signature = request.headers['x-nowpayments-sig'];
const payload = JSON.stringify(request.body);
const secret = process.env.NOWPAYMENTS_IPN_SECRET;

const computedSignature = crypto
  .createHmac('sha512', secret)
  .update(payload)
  .digest('hex');

if (signature !== computedSignature) {
  return { statusCode: 403, body: 'Invalid signature' };
}
```

---

## üìä –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å

### –≠–∫—Å–ø–æ—Ä—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
```sql
SELECT 
  ppt.id,
  pp.name as provider,
  ppt.amount,
  ppt.currency,
  ppt.status,
  ppt.created_at,
  ppt.completed_at
FROM payment_provider_transactions ppt
JOIN payment_providers pp ON ppt.provider_id = pp.id
WHERE ppt.created_at >= '2024-01-01'
ORDER BY ppt.created_at DESC;
```

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º
```sql
SELECT 
  pp.name,
  COUNT(*) as total_transactions,
  COUNT(CASE WHEN ppt.status = 'completed' THEN 1 END) as completed,
  SUM(CASE WHEN ppt.status = 'completed' THEN ppt.amount ELSE 0 END) as volume
FROM payment_provider_transactions ppt
JOIN payment_providers pp ON ppt.provider_id = pp.id
GROUP BY pp.name;
```

---

## üéì –õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤** –¥–ª—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏
2. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ uptime** –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã** –Ω–∞ failed –ø–ª–∞—Ç–µ–∂–∏
4. **–†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ** API –∫–ª—é—á–∏
5. **–í–µ–¥–∏—Ç–µ –ª–æ–≥–∏** –≤—Å–µ—Ö webhook –∑–∞–ø—Ä–æ—Å–æ–≤
6. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ** –Ω–∞ sandbox –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º

---

**–ì–æ—Ç–æ–≤–æ! –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø–ª–∞—Ç–µ–∂–µ–π –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç üöÄ**
